<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home work 13</title>
</head>
<body>
</body>
<script>
    // 1. Сравнение длинны строк
    function lenghtComp(str1,str2) {
    let length1 = str1.length;
    let length2 = str2.length;
    let result;
    if (length1 > length2) {
        result = 1;
    } else if (length1 < length2) {
        result = -1;
    } else if (length1 == length2) {
        result = 0;
    } else {
        result = "error";
    }
    return result
    };

    // 2. Перевод первого символа строки в верхний регистр
    let cap = str => str[0].toUpperCase()+str.slice(1,str.length);

    // 3. Подсчёт количества гласных букв в переданной строке
    function vowelCount(str) {
    const vowels = ["а","е","ё","и","о","у","ы","э","ю","я","А","Е","Ё","И","О","У","Ы","Э","Ю","Я"];
    let result = 0;
    for (let vowel of vowels){
        let count = 0;
        for (let i in str) {
        if (str[i] == vowel){
            count++
        }
        }
        result = result+count;
    }
    return `В строке ${result} гласных`;
    };

    // 4. Проверка на спам
    function antiSpam(str) {
    str = str.toLowerCase();
    let result;
    if (str.includes('скидка')==true || str.includes('бесплатно')==true || str.includes('акция')==true) {
        result = true;
    } else {
        result = false;
    }
    return result
    };

    // 5. Сокращение строки
    let Abbrev = (str,n) => str = str.substr(0,n-3).concat('...')

    // 6. Определение палиндрома
    function getPalindrome(str) {
    let str2 = str.split('').reverse().join('');
    if (str==str2) {
        return 'Это палиндром'
    } else {
        return 'Это не палиндром'
    }
    };

    // 7. Количество слов в предложении
    let countWord = str => `В предложении ${str.split(' ').length} слов`

    // 8. Определение самого длинного слова
    function lonhWord(str) {
    let array = str.split(' ');
    let len = 0;
    let j = 0;
    for (let i in array) {
        if (array[i].length > len) {
        len = array[i].length
        j = i
        }
    }
    return `Самое длинное слово в предложении: ${array[j]}`
    };

    // 9. Средняя длина слов
    function avgLength(str) {
    let array = str.split(' ');
    let avgLen = 0;
    for (let i in array) {
        avgLen = avgLen + array[i].length
    }
    return `Средняя длина слов в предложении: ${Math.round(avgLen/array.length)} букв`
    };

    // 10. Поиск символа в строке
    function countElements(str, n) {
    let indexEl = [];
    let countEl = 0;
    for (let i in str){
        if (str[i] == n) {
        countEl++
        indexEl.push(i)
        }
    }
    return `Индексы, по которым находится символ в строке: ${indexEl}\nСимвол в строке встречается ${countEl} раз`
    };

    console.log(lenghtComp('Первая стока подлиннее','Вторая строка короче'));
    console.log(cap('строка с маленькой буквы'));
    console.log(vowelCount('Строка, гдЕ много рАзных гласнЫх'));
    console.log(antiSpam('В этой строке точно есть СКИДКА'));
    console.log(Abbrev('Сокращённая строка',8));
    console.log(getPalindrome('мат и тут и там'));
    console.log(countWord('Строка (или предложение) с некоторым количеством слов'));
    console.log(lonhWord('Строка, где есть длиннющее слово'));
    console.log(avgLength('В среднем в этой строке слова'));
    console.log(countElements('Будем искать популярную, но незаметную букву','у'));

    // 1. Создание и вывод объекта
    const person = {
        name: 'Tatiana',
        age: 27,
        city: 'SPb'
    };
    console.log(person);

    // 2. Изменение свойств объекта
    const car = {
        make: 'BMV',
        model: 'A6',
        year: 2020
    };
    console.log(`Год до изменения: ${car.year}`);
    car.year = 2024;
    console.log(`Год после изменения: ${car.year}`);

    // 3. Добавление новых свойств
    const book = {
        title: 'The Colour of Magic',
        autor: 'Terry Pratchett'
    };
    book.publishedYear = 1983;
    console.log(book);

    // 4. Удаление свойств
    const student ={
        name: 'Vladimir',
        grade: 5,
        age: 21
    };
    delete student.age
    console.log(student);

    // 5. Проверка наличия свойства
    const product ={
        id: 1576,
        name: 'phone',
        price: '1050$'
    };
    function searchPrice(obj){
        let productPrice = obj.price;
        if (productPrice == undefined) {
            console.log('У объекта нет свойства price');
        } else {
            console.log(`Цена объекта: ${productPrice}`);
        }
    };
    searchPrice(product);

    // 6. Перебор свойств объекта
    const fruits ={
        apple: 3,
        orange: 2,
        kiwi: 5
    };
    for (fruit in fruits){
        console.log(`${fruit}: ${fruits[fruit]}`)
    }

    // 7. Слияние объектов
    obj1 = { a: 1, b: 2 };
    obj2 = { b: 3, c: 4 };
    objSum = {}
    for (i in obj1) {
       for (j in obj2){
        if (i == j){
            objSum[i]=obj1[i]+obj2[j]
        } else if (objSum[j] == undefined) {
            objSum[i]=obj1[i]
            objSum[j]=obj2[j]
        } else if (objSum[i] == undefined) {
            objSum[i]=obj1[i]
        }
       } 
    };
    console.log(objSum);

    // 8. Копирование объекта
    const original = {
        first: 1,
        second: 2,
        third: {
            fghjk: 5,
            dud: 3,
            sdcjids: 8
        }
    };
    const copy = Object.assign({}, original);
    copy.first = 5;
    copy.third = 4;
    console.log(`Оригинальный объект:`);
    console.log(original);
    console.log(`Копия:`);
    console.log(copy);

    // 9. Функция для подсчета свойств
    function lenObject(obj) {
        let length = 0;
        for (let o in obj) {
            if (Object.keys(obj[o]).length < 1) {
                length++
            } else {
                length = length + Object.keys(obj[o]).length+1
            }
        }
        console.log(`В объекте ${length} свойств`)
    };
    lenObject(original);

    // 10. Код по пунктам
    user = {};
    user.name = 'John';
    user.surname = 'Smith';
    user.name = 'Pete';
    delete user.name;

    // 11. Сумма зарплат
    let salaries = {
        John: 100,
        Ann: 160,
        Pete: 130
    }
    function salSum(obj){
        let sum = 0;
        for (o in obj){
            sum = sum + obj[o]
        }
        console.log(`Общая сумма зарплат: ${sum}`)
    }
    salSum(salaries)
</script>
</html>